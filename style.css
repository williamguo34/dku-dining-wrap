/* DKU Dining Wrap MVP â€” minimal styling */
:root{
  --bg: #0b0d12;
  --card: #121622;
  --card2:#0f1320;
  --text: #e9ecf1;
  --muted:#a7b0c0;
  --line:#25304a;
  --accent:#7dd3fc;
  --accent2:#a78bfa;
  --btn:#1f2a44;
  --btn2:#182035;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
  background: radial-gradient(1200px 700px at 20% 10%, rgba(125,211,252,.14), transparent 60%),
              radial-gradient(1200px 700px at 80% 0%, rgba(167,139,250,.12), transparent 55%),
              var(--bg);
  color:var(--text);
}

/* Hover emboss + glow (mouse-tracked spotlight) */
.glow-hover{
  position: relative;
  transform: translateZ(0);
  transition: transform .22s cubic-bezier(.2,.9,.2,1), border-color .22s ease, box-shadow .22s ease;
}
.glow-hover:hover{
  box-shadow:
    0 18px 60px rgba(0,0,0,.35),
    inset 0 1px 0 rgba(255,255,255,.06),
    inset 0 -1px 0 rgba(0,0,0,.40);
}

/* Subtle 3D tilt (Wrapped-like) */
.tilt-hover{
  --rx: 0deg;
  --ry: 0deg;
  transform-style: preserve-3d;
}
.tilt-hover:hover{
  transform: perspective(900px) rotateX(var(--rx)) rotateY(var(--ry)) translateY(-2px);
}

@media (prefers-reduced-motion: reduce){
  .glow-hover{transition:none}
  .glow-hover:hover{transform:none}
  .tilt-hover:hover{transform:none}
}

a{color:inherit}

.topbar{
  position: sticky;
  top: 0;
  z-index: 50;
  background: rgba(11,13,18,.8);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(37,48,74,.6);
  padding: 14px 18px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 14px;
}

.brand{display:flex;align-items:center;gap:12px}
.logo{
  width:40px;height:40px;border-radius:12px;
  display:grid;place-items:center;
  background: linear-gradient(135deg, rgba(125,211,252,.25), rgba(167,139,250,.18));
  border: 1px solid rgba(125,211,252,.25);
}
.title{font-size:16px;font-weight:700;letter-spacing:.2px}
.subtitle{font-size:12px;color:var(--muted)}
.actions{display:flex;gap:10px;flex-wrap:wrap}

.container{max-width:980px;margin:22px auto;padding:0 16px 40px}
.card{
  background: linear-gradient(180deg, rgba(18,22,34,.94), rgba(15,19,32,.94));
  border: 1px solid rgba(37,48,74,.75);
  border-radius: 18px;
  padding: 18px 18px;
  box-shadow: 0 20px 60px rgba(0,0,0,.28);
  margin-bottom: 16px;
}

/* Apply glow to main containers */
.card{position:relative}
.card.glow-hover:hover{border-color: rgba(125,211,252,.28)}
.slide.glow-hover:hover{border-color: rgba(125,211,252,.22)}

/* Key inner blocks */
.rank-big.glow-hover:hover{border-color: rgba(125,211,252,.32)}
.rank-small.glow-hover:hover{border-color: rgba(255,255,255,.12)}
.chart-panel.glow-hover:hover{border-color: rgba(255,255,255,.12)}
.quote-card.glow-hover:hover{border-color: rgba(125,211,252,.28)}
.achievement-card.glow-hover:hover{border-color: rgba(125,211,252,.28)}
.memory-card.glow-hover:hover{border-color: rgba(125,211,252,.22)}
.prediction-item.glow-hover:hover{border-color: rgba(125,211,252,.22)}
.spend-category.glow-hover:hover{border-color: rgba(125,211,252,.28)}
.comparison-item.glow-hover:hover{border-color: rgba(125,211,252,.22)}

h2{margin:0 0 10px;font-size:18px}
h3{margin:0 0 10px;font-size:16px}
p{line-height:1.55}
.muted{color:var(--muted)}
code{background:rgba(255,255,255,.06);padding:2px 6px;border-radius:8px;border:1px solid rgba(255,255,255,.07)}

.btn{
  appearance:none;
  border:1px solid rgba(125,211,252,.18);
  background: linear-gradient(180deg, rgba(31,42,68,.9), rgba(24,32,53,.9));
  color: var(--text);
  padding: 10px 12px;
  border-radius: 12px;
  cursor:pointer;
  font-weight:600;
}
.btn:hover{border-color: rgba(125,211,252,.35)}
.btn:disabled{opacity:.5;cursor:not-allowed}
.btn-secondary{
  border-color: rgba(167,139,250,.20);
  background: linear-gradient(180deg, rgba(34,30,56,.9), rgba(22,20,41,.9));
}
.btn-small{padding:8px 10px;border-radius:10px;font-size:12px}

.bookmarklet{margin-top:10px}
.bookmarklet-row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.bookmarklet-btn{
  display:inline-block;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px dashed rgba(125,211,252,.35);
  background: rgba(125,211,252,.08);
  text-decoration:none;
  font-weight:700;
}
.details{margin-top:10px}
.details summary{cursor:pointer;color:var(--accent)}
.details ol{margin:10px 0 0 18px}

/* Entertaining Wrap Styles */
.personality-reveal{text-align:center;padding:40px 20px}
.big-emoji{font-size:80px;margin-bottom:20px}
.personality-reveal h2{margin-bottom:30px;color:#e9ecf1}
.personality-name{font-size:36px;font-weight:700;margin:20px 0;color:#7dd3fc}
.personality-desc{font-size:18px;margin:15px 0;color:#a7b0c0}
.personality-stats{display:flex;justify-content:center;gap:30px;margin-top:40px}
.personality-stats .stat{background:rgba(125,211,252,.1);border:1px solid rgba(125,211,252,.3);border-radius:12px;padding:15px 20px;text-align:center;min-width:120px}

.big-picture{text-align:center;padding:30px 20px}
.big-picture h2{margin-bottom:40px}
.big-numbers{display:flex;justify-content:center;gap:40px;margin:40px 0}
.big-num{text-align:center}
.big-num .number{font-size:48px;font-weight:700;color:#7dd3fc;margin-bottom:10px}
.big-num .label{color:#a7b0c0;font-size:14px}
.fun-facts{margin-top:50px;text-align:left;max-width:600px;margin-left:auto;margin-right:auto}
.fun-facts h3{text-align:center;margin-bottom:20px}
.fun-facts ul{list-style:none;padding:0}
.fun-facts li{background:rgba(125,211,252,.1);border:1px solid rgba(125,211,252,.2);border-radius:8px;padding:15px;margin:10px 0;border-left:4px solid #7dd3fc}

.timeline{padding:30px 20px}
.timeline h2{text-align:center;margin-bottom:40px}
.monthly-chart{display:flex;flex-direction:column;gap:15px;max-width:800px;margin:0 auto}
.month-bar{display:flex;align-items:center;gap:15px}
.month-label{min-width:80px;font-weight:600;color:#e9ecf1}
.bar-container{flex:1;height:24px;background:rgba(255,255,255,.1);border-radius:12px;overflow:hidden}
.bar{height:100%;background:linear-gradient(90deg,#7dd3fc,#a78bfa);border-radius:12px;transition:width 1s ease}
.month-spend{min-width:80px;text-align:right;font-weight:600;color:#7dd3fc}

.achievements{text-align:center;padding:30px 20px}
.achievements h2{margin-bottom:40px}
.achievement-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;max-width:1000px;margin:0 auto}
.achievement-card{background:linear-gradient(135deg,rgba(125,211,252,.1),rgba(167,139,250,.1));border:1px solid rgba(125,211,252,.3);border-radius:16px;padding:25px;text-align:center;transition:transform 0.3s ease}
.achievement-card:hover{transform:translateY(-5px)}
.achievement-icon{font-size:40px;margin-bottom:15px}
.achievement-name{font-size:18px;font-weight:700;margin-bottom:8px;color:#e9ecf1}
.achievement-desc{color:#a7b0c0;font-size:14px}
.more-achievements{margin-top:30px;color:#a7b0c0;font-style:italic}

.memories{padding:30px 20px}
.memories h2{text-align:center;margin-bottom:40px}
.memory-cards{display:flex;flex-direction:column;gap:20px;max-width:700px;margin:0 auto}
.memory-card{background:linear-gradient(135deg,rgba(125,211,252,.1),rgba(167,139,250,.1));border:1px solid rgba(125,211,252,.3);border-radius:12px;padding:20px;display:flex;align-items:center;gap:15px}
.memory-icon{font-size:30px}
.memory-text{flex:1;color:#e9ecf1}

.predictions{text-align:center;padding:40px 20px}
.predictions h2{margin-bottom:40px}
.crystal-ball{font-size:60px;margin:30px 0}
.prediction-list{display:flex;flex-direction:column;gap:15px;max-width:600px;margin:0 auto}
.prediction-item{background:linear-gradient(135deg,rgba(125,211,252,.1),rgba(167,139,250,.1));border:1px solid rgba(125,211,252,.3);border-radius:12px;padding:20px;display:flex;align-items:center;gap:15px}
.prediction-icon{font-size:25px}
.prediction-text{flex:1;text-align:left;color:#e9ecf1}

.share-quotes{text-align:center;padding:30px 20px}
.share-quotes h2{margin-bottom:40px}
.quote-cards{display:flex;flex-direction:column;gap:20px;max-width:700px;margin:0 auto}
.quote-card{background:linear-gradient(135deg,rgba(125,211,252,.1),rgba(167,139,250,.1));border:1px solid rgba(125,211,252,.3);border-radius:12px;padding:25px;cursor:pointer;transition:all 0.3s ease;text-align:left}
.quote-card:hover{transform:translateY(-3px);border-color:#7dd3fc}
.quote-text{font-size:18px;font-style:italic;color:#e9ecf1;margin-bottom:10px;line-height:1.4}
.quote-action{color:#a7b0c0;font-size:14px}
.hashtags{margin-top:40px;color:#7dd3fc;font-weight:600;font-size:16px}

.money-stats{text-align:center;padding:30px 20px}
.money-stats h3{margin-bottom:40px}
.spending-breakdown{display:flex;justify-content:center;gap:40px}
.spend-category{background:linear-gradient(135deg,rgba(125,211,252,.1),rgba(167,139,250,.1));border:1px solid rgba(125,211,252,.3);border-radius:16px;padding:30px;display:flex;align-items:center;gap:20px;min-width:250px}
.category-icon{font-size:40px}
.category-info{text-align:left}
.category-name{color:#a7b0c0;margin-bottom:5px}
.category-value{font-size:24px;font-weight:700;color:#7dd3fc}

.comparison{text-align:center;padding:30px 20px}
.comparison h3{margin-bottom:40px}
.comparison-stats{display:flex;flex-direction:column;gap:20px;max-width:500px;margin:0 auto}
.comparison-item{background:linear-gradient(135deg,rgba(125,211,252,.1),rgba(167,139,250,.1));border:1px solid rgba(125,211,252,.3);border-radius:12px;padding:20px;text-align:left}
.comparison-label{color:#a7b0c0;margin-bottom:5px}
.comparison-value{font-size:18px;font-weight:600;color:#e9ecf1;margin-bottom:5px}
.comparison-percentile{color:#7dd3fc;font-weight:600}
.comparison-note{margin-top:30px;color:#a7b0c0}

.ending{text-align:center;padding:40px 20px}
.ending-emoji{font-size:60px;margin-bottom:20px}
.ending h2{margin-bottom:20px;color:#e9ecf1}
.ending-message{color:#a7b0c0;margin-bottom:40px;font-size:16px;line-height:1.6}
.ending-stats{display:flex;justify-content:center;gap:40px;margin:40px 0}
.ending-stat{text-align:center}
.ending-number{font-size:36px;font-weight:700;color:#7dd3fc;margin-bottom:5px}
.ending-label{color:#a7b0c0;font-size:14px}
.ending-hashtags{margin-top:40px;color:#7dd3fc;font-weight:600}

.uploader{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.uploader-actions{margin-top:12px;text-align:center}
.status{margin-top:10px}

.wrap-shell{margin-top:10px}
.wrap-nav{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
.nav-center{display:flex;flex-direction:column;align-items:center;gap:8px;flex:1;min-width:0}
.pager{font-size:12px}

.auto-controls{display:flex;align-items:center;gap:10px;justify-content:center;min-width:0}
.progress{
  width: min(360px, 60vw);
  height: 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.06);
  overflow: hidden;
}
.progress-bar{
  height: 100%;
  width: 0%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(125,211,252,.95), rgba(167,139,250,.95));
  box-shadow: 0 0 20px rgba(125,211,252,.18);
  transition: width .08s linear;
}
.progress.is-paused{opacity:.55}

/* Fullscreen Wrap (only the wrap-shell goes fullscreen) */
.wrap-shell:fullscreen,
.wrap-shell:-webkit-full-screen{
  display: flex;
  flex-direction: column;
  width: 100vw;
  height: 100vh;
  margin: 0;
  padding: 12px 12px 16px;
  background: var(--bg);
}

.wrap-shell:fullscreen .wrap-nav,
.wrap-shell:-webkit-full-screen .wrap-nav{
  flex: 0 0 auto;
}

.wrap-shell:fullscreen .slides,
.wrap-shell:-webkit-full-screen .slides{
  flex: 1 1 auto;
  min-height: 0;
}

.wrap-shell:fullscreen .slide,
.wrap-shell:-webkit-full-screen .slide{
  height: 100%;
  min-height: 0;
  overflow: auto;
}

.slides{position:relative}
.slide{
  display:none;
  border-radius: 16px;
  border: 1px solid rgba(37,48,74,.65);
  background: rgba(10,12,18,.55);
  padding: 14px;
  min-height: 62vh;
  overflow: hidden;
}
.slide.active{display:block}
.slide-inner{padding: 10px}

/* Location Legends should shrink to content (less empty space) */
.slide[data-title="Location Legends"]{min-height:auto}

.slide.enter{
  animation: slideEnter .55s cubic-bezier(.2,.9,.2,1);
}

@keyframes slideEnter{
  from{opacity:0; transform: translateY(14px) scale(.995)}
  to{opacity:1; transform: translateY(0) scale(1)}
}

/* Text reveal (rolling in) */
.reveal{
  opacity: 0;
  transform: translateY(18px);
  filter: blur(2px);
  will-change: opacity, transform, filter;
}
.reveal.reveal-in{
  opacity: 1;
  transform: translateY(0);
  filter: blur(0);
  transition: opacity .62s ease, transform .62s cubic-bezier(.2,.9,.2,1), filter .62s ease;
}

@keyframes slideIn{
  from{opacity:0; transform: translateY(-6px)}
  to{opacity:1; transform: translateY(0)}
}

.kpi-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap:12px;
}
.kpi{
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(255,255,255,.06);
  border-radius: 16px;
  padding: 12px;
}
.kpi-label{font-size:12px;color:var(--muted)}
.kpi-value{font-size:28px;font-weight:800;margin-top:6px}
.kpi-sub{font-size:12px;margin-top:4px}

.grid-2{
  display:grid;
  grid-template-columns: 1.2fr .8fr;
  gap: 14px;
  align-items: start;
}
.grid-1{display:grid;grid-template-columns:1fr;gap:14px}

/* Slide-specific layout tuning */
.grid-2.grid-2-eq{grid-template-columns: 1fr 1fr; gap: 16px;}
.grid-2.grid-2-wide{grid-template-columns: 1.55fr .75fr; gap: 16px;}

/* Card 4: stacked charts (use vertical space better) */
.stack-charts{display:grid;grid-template-columns:1fr;gap:16px}
.chart-panel{
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.03);
  padding: 14px;
}
.chart-panel h3{margin-bottom:10px}
.slide[data-title="The Daily Rhythm"] canvas{
  width: 100% !important;
  height: 260px !important;
}

/* Card 5: ranking cards (big + small) */
.legends-grid{align-items:start}
.rank-section{min-width:0}
.rank-block{display:flex;flex-direction:column;gap:12px}

.rank-big{
  border-radius: 20px;
  border: 1px solid rgba(125,211,252,.26);
  background: linear-gradient(135deg, rgba(125,211,252,.13), rgba(167,139,250,.10));
  padding: 16px;
}

.rank-banner{display:flex;align-items:center;justify-content:space-between;gap:12px}
.rank-banner-left{min-width:0}
.rank-banner-right{flex:0 0 auto}

.rank-dot{
  display:inline-grid;
  place-items:center;
  width: 26px;
  height: 26px;
  border-radius: 999px;
  margin-right: 10px;
  border: 1px solid rgba(125,211,252,.30);
  background: rgba(125,211,252,.14);
  font-size: 12px;
  font-weight: 900;
  color: var(--text);
  flex: 0 0 auto;
}

.rank-title{display:flex;align-items:center;gap:0;min-width:0}
.rank-title-big{font-size:20px;font-weight:950;letter-spacing:.2px}
.rank-title{font-size:14px;font-weight:850;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

.rank-value{font-weight:850;color:var(--text)}
.rank-value-big{font-size:18px}
.rank-sub{margin-top:6px;color:var(--muted);font-size:13px;line-height:1.35}

.rank-smalls{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.rank-smalls-vert{display:flex;flex-direction:column;gap:12px}
.rank-small{
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.03);
  padding: 12px;
  min-width:0;
}
.rank-row{display:flex;align-items:center;justify-content:space-between;gap:12px}
.rank-small .rank-sub{margin-top:6px}

@media (max-width: 780px){
  .rank-smalls{grid-template-columns:1fr}
}

.list{margin:0;padding-left:18px}
.list li{margin:8px 0}

.note{
  margin-top:12px;
  border-radius: 16px;
  border: 1px solid rgba(125,211,252,.18);
  background: linear-gradient(135deg, rgba(125,211,252,.08), rgba(167,139,250,.06));
  padding: 12px;
}
.note-title{font-weight:800}
.note-body{margin-top:6px;line-height:1.5}

.footer{margin-top:10px;text-align:center;font-size:12px}

@media (max-width: 780px){
  .kpi-grid{grid-template-columns:1fr}
  .grid-2{grid-template-columns:1fr}
}

/* Export mode - brighten all content for PNG export */
.slide.exporting {
  background: #0a0c12 !important;
  opacity: 1 !important;
}

.slide.exporting,
.slide.exporting * {
  opacity: 1 !important;
}

.slide.exporting h1,
.slide.exporting h2,
.slide.exporting h3,
.slide.exporting h4,
.slide.exporting h5,
.slide.exporting h6 {
  color: #ffffff !important;
}

.slide.exporting .number,
.slide.exporting .rank-value,
.slide.exporting .kpi-value,
.slide.exporting .rank-title,
.slide.exporting .personality-name,
.slide.exporting .achievement-name,
.slide.exporting .memory-text strong {
  color: #ffffff !important;
}

.slide.exporting .comparison-percentile,
.slide.exporting .category-value,
.slide.exporting .ending-number {
  color: #7dd3fc !important;
}

.slide.exporting .muted,
.slide.exporting .rank-sub,
.slide.exporting .kpi-sub,
.slide.exporting .label,
.slide.exporting .kpi-label {
  color: #c5cedb !important;
}

.slide.exporting p,
.slide.exporting div,
.slide.exporting span,
.slide.exporting li,
.slide.exporting strong,
.slide.exporting b {
  color: #e9ecf1 !important;
}

.slide.exporting .kpi,
.slide.exporting .rank-big,
.slide.exporting .rank-small,
.slide.exporting .note,
.slide.exporting .chart-panel {
  background: rgba(255, 255, 255, 0.08) !important;
  border-color: rgba(255, 255, 255, 0.15) !important;
}

/* Export/Print optimization - ensure high contrast and visibility */
@media print {
  .slide {
    background: rgba(10,12,18,.98) !important;
    border-color: rgba(125,211,252,.5) !important;
  }
  
  .slide-inner,
  .rank-big,
  .rank-small,
  .kpi,
  .note,
  .chart-panel {
    opacity: 1 !important;
  }
  
  body,
  .slide,
  h1, h2, h3, h4, h5, h6,
  p, div, span,
  .rank-title,
  .rank-value,
  .kpi-value {
    color: #e9ecf1 !important;
    opacity: 1 !important;
  }
  
  .muted,
  .rank-sub,
  .kpi-sub {
    color: #b8c2d4 !important;
    opacity: 1 !important;
  }
}
